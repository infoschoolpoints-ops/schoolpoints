═══════════════════════════════════════════════════════════════════
   🔄 הוראות עדכון מערכת ניהול הנקודות - גרסה עם הרשאות מורים
═══════════════════════════════════════════════════════════════════

⚠️ חשוב: הנתונים הקיימים שלכם בטוחים לחלוטין! 
   השינויים רק מוסיפים תכונות חדשות ולא מוחקים כלום.

═══════════════════════════════════════════════════════════════════
📋 שלב 1: גיבוי (מומלץ אבל לא חובה)
═══════════════════════════════════════════════════════════════════

1. עשה עותק של התיקייה המשותפת (אם יש לך):
   העתק את: \\server\shared\SchoolPoints
   לתיקייה זמנית: \\server\shared\SchoolPoints_backup

2. או - עשה עותק של school_points.db:
   העתק את: school_points.db
   לתיקייה זמנית: school_points.db.backup

═══════════════════════════════════════════════════════════════════
📥 שלב 2: העתקת קבצים מעודכנים
═══════════════════════════════════════════════════════════════════

העתק את 3 הקבצים הבאים מהמחשב המרכזי לכל המחשבים:

מ: C:\מיצד\SchoolPoints\
אל: התיקייה המקומית בכל מחשב

קבצים להעתקה:
   ✅ database.py          (חובה!)
   ✅ admin_station.py     (חובה!)
   ✅ messages.py          (חובה!)
   ✅ splash_screen.py     (חדש! - מסך טעינה יפה)
   ✅ admin_station.pyw    (חדש! - הפעלה ללא CMD)
   ✅ public_station.pyw   (חדש! - הפעלה ללא CMD)
   ✅ run_admin.bat        (מעודכן!)
   ✅ run_public.bat       (מעודכן!)

══════════════════════════════════════════════════════════════════
⚙️ שלב 3: הפעלה ראשונה - יצירת מנהל ראשוני
══════════════════════════════════════════════════════════════════

רק במחשב אחד (המרכזי), בפעם הראשונה:

💡 דרך חדשה: לחיצה כפולה על admin_station.pyw (ללא חלון CMD!)
   או: לחיצה כפולה על run_admin.bat (כמו קודם)

1. פתח את עמדת הניהול:
   - לחץ פעמיים על admin_station.pyw (מומלץ!)
   - או: לחץ פעמיים על run_admin.bat

2. יופיע מסך טעינה יפה עם "אנא המתן..."

3. יופיע מסך התחברות

3. לחץ על: "🔧 הגדרת מנהל ראשוני"

4. הזן:
   - שם המנהל: "מנהל ראשי" (או כל שם)
   - מספר כרטיס: העבר את כרטיס ה-RFID של המנהל

5. לחץ "צור מנהל"

6. עכשיו העבר שוב את הכרטיס - המערכת תיפתח!

══════════════════════════════════════════════════════════════════
👥 שלב 4: הוספת מורים (ממחשב המנהל)
══════════════════════════════════════════════════════════════════

1. בעמדת הניהול (כמנהל), לחץ על: "👥 ניהול מורים"

2. לחץ "➕ הוסף מורה"

3. לכל מורה, הזן:
   - שם המורה
   - מספר הכרטיס שלו (העבר את הכרטיס)
   - תפקיד: מורה (או מנהל אם צריך עוד מנהל)
   - כיתות: א1, א2, ב3 (הכיתות שהוא מלמד, מופרדות בפסיק)

4. שמור

5. חזור על זה לכל מורה

══════════════════════════════════════════════════════════════════
🚀 שלב 5: התחברות יומיומית (בכל מחשב)
══════════════════════════════════════════════════════════════════

מעכשיו, כל מורה:

1. פותח את עמדת הניהול
2. מעביר את הכרטיס שלו
3. רואה רק את התלמידים מהכיתות שלו
4. עובד כרגיל - מעדכן נקודות, משנה כרטיסים, וכו'

══════════════════════════════════════════════════════════════════
✨ מה חדש במערכת? (גרסאות הרשאות + בונוסים משודרגים)
═══════════════════════════════════════════════════════════════════

✅ 🎨 מסך טעינה יפה - "אנא המתן..." במקום חלון שחור!
✅ 🚫 אין CMD - הפעלה נקייה ללא חלון שחור מפחיד
✅ התחברות מהירה - פחות משניה!
✅ רענון אוטומטי כל 10 שניות - עדכונים מהעמדה הציבורית
✅ סינכרון אוטומטי עם Excel:
   - סינכרון ראשון אחרי 10 שניות מההתחברות
   - אחר כך כל 2 דקות
   - זמין לכולם - מנהלים ומורים!
✅ כפתור סינכרון ידני - לסינכרון מיידי בכל זמן
✅ הודעות כלליות עובדות תקין - שינויים משתקפים מיד
✅ מערכת הרשאות - כל מורה רואה רק את הכיתות שלו
✅ מנהלים רואים הכל - כל התלמידים, כל האפשרויות

✅ מערכת בונוסים מתקדמת בעמדה הציבורית:
   - בונוס מורה, בונוס מיוחד (מאסטר 2) ובונוס זמנים יכולים לעבוד יחד
   - כאשר תלמיד מקבל כמה סוגי בונוס באותה סריקה, מוצגת הודעה מאוחדת: 
     "קיבלת 2+8 (=10) נקודות בונוס" (סה"כ אחד במקום כמה שורות נפרדות)
   - פסי הבונוס (צהוב/כחול) הותאמו כך שלא ייחתכו גם במצב אורך (template1)

✅ מצב בונוס מורה משודרג:
   - הפעלה וכיבוי בעמדה הציבורית נעשים בכרטיס המורה (ללא חלונות מיותרים)
   - מצב הבונוס נשמר גם אחרי פתיחה מחדש של העמדה הציבורית
   - תלמיד שכבר קיבל בונוס מורה באותו סבב לא יקבל אותו שוב בטעות

══════════════════════════════════════════════════════════════════
❓ שאלות נפוצות
══════════════════════════════════════════════════════════════════

ש: האם התלמידים והנקודות הקיימים נמחקים?
ת: לא! הכל נשאר בדיוק כמו שהיה. רק נוספות תכונות חדשות.

ש: מה אם מורה שכח את הכרטיס?
ת: פנה למנהל - המנהל יכול לעדכן/להוסיף כרטיס חדש במסך "ניהול מורים"

ש: אפשר למחוק את מערכת ההרשאות?
ת: כן, אבל לא מומלץ. אם בכל זאת - פשוט השתמש בגרסה הישנה של admin_station.py

ש: האם צריך לעדכן גם את העמדה הציבורית?
ת: לא! העמדה הציבורית (public_station.py) לא השתנתה. 
   רק עדכן את messages.py שם כדי שההודעות הכלליות יעבדו.

ש: מה קורה אם יש 2 מורים לאותה כיתה?
ת: מעולה! שני המורים יראו את אותם התלמידים. 
   פשוט שייך את שניהם לאותה כיתה.

ש: איך עובד הסינכרון עם Excel?
ת: הסינכרון קורא נתונים מהאקסל ומעדכן את מסד הנתונים.
   - סינכרון אוטומטי: אחרי 10 שניות, ואז כל 2 דקות
   - סינכרון ידני: לחץ על "🔄 סינכרון" בכל זמן
   - זמין לכולם: מנהלים ומורים!
   - בטוח: לא דורס שינויים, רק מעדכן

ש: מה ההבדל בין סינכרון לייבוא/ייצוא?
ת: - סינכרון (🔄) - קורא מהאקסל ומעדכן את מסד הנתונים (לכולם)
   - ייבוא (📥) - ייבוא מלא של כל התלמידים (רק מנהלים)
   - ייצוא (📤) - ייצוא מלא לאקסל (רק מנהלים)

ש: למה אני רואה קבצים school_points.db ו-school_points.db-journal?
ת: זה תקין לחלוטין!
   - school_points.db = מסד הנתונים הראשי (גבה אותו!)
   - school_points.db-journal = קובץ עזר זמני (נוצר בזמן עדכונים)
   אל תמחק אותם! ראה קובץ "מידע_על_קבצי_מערכת.txt" למידע מפורט.

ש: איך אני מפעיל את התוכנה ללא החלון השחור (CMD)?
ת: פשוט! לחץ פעמיים על הקבצים החדשים:
   - admin_station.pyw (עמדת ניהול)
   - public_station.pyw (עמדה ציבורית)
   או השתמש ב-run_admin.bat / run_public.bat המעודכנים

══════════════════════════════════════════════════════════════════
📞 תמיכה טכנית
══════════════════════════════════════════════════════════════════

אם יש בעיות:
1. בדוק שהעתקת את 3 הקבצים לכל המחשבים
2. בדוק שכל המחשבים מצביעים לאותו מסד נתונים (אם יש משותף)
3. בדוק שיצרת מנהל ראשוני
4. נסה לסגור ולפתוח מחדש את התוכנה

══════════════════════════════════════════════════════════════════
✅ סיום
══════════════════════════════════════════════════════════════════

אחרי ביצוע כל השלבים:
- המערכת תפעל בדיוק כמו קודם
- פשוט עכשיו עם הרשאות ורענון אוטומטי
- כל המורים יכולים לעבוד בו-זמנית
- המנהל שולט בהכל

בהצלחה! 🎉
